

//bl := int

TGuard := !(void^ ptr) -> void
{
	//TLock(ptr)
	printf("a %p\n",ptr)
} defer_tail (void^ ptr)
{
	//TUnlock(ptr)
	printf("c %p\n", ptr)
}

main := !(int argc, char^^ argv) -> int
{
	//defer printf("d\n")
	c := int
	printf("start %p\n",c&)
	TGuard(c&)
	printf("b\n")
	//TExpectWorkers(6)
	//for 5
	//{
	//	TSpawnTask(() ==> {
	//		TAwaitWork(() ==> {
	//			for 100000 
	//			{
	//				bl += 1
	//			}
	//		})
	//		printf("wut %i\n",bl)
	//	})
	//}
	return 0
}
