
ConstStrings := AVLMap.{char^,StringSpan}

GetConstString := !(char^ val) -> ref StringSpan
{
	if ConstStrings.Contain(val)
		return ConstStrings[val]
	stSize := StrSize(val)
	v2 := malloc(stSize + 1)->{char^}
	memcpy(v2,val,stSize)
	v2[stSize] = 0
	spn := StringSpan(v2,stSize)
	ConstStrings[v2] = spn
	return ConstStrings[val]
}
