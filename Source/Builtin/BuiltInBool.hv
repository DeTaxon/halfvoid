
CreateBuiltinsBool := !() -> void
{
	bSpace := CodeSpaces[-1]&

	x := GTypeBool
	storeType := GetFuncType(![x,x],![true,false],GTypeVoid)
	cmpType := GetFuncType(![x,x],GTypeBool)

	bSpace.Functions["="].Push(new BuiltInPrimeStore(storeType) )
	bSpace.Functions["=="].Push(new BuiltInIntBase(cmpType,"icmp eq") )
	bSpace.Functions["!="].Push(new BuiltInIntBase(cmpType,"icmp ne") )
	bSpace.Functions[". not"].Push(new BuiltInBoolNot() )
	bSpace.Functions["<=>"].Push(new BuildInSpaceShipBool())
	bSpace.Functions["xor"].Push(new BuildInBoolXor())
}

BuiltInBoolNot := class extend BoxFuncCommon
{
	this := !() -> void
	{
		SetType(GetFuncType(![GTypeBool],GTypeBool))
	}
	PrintFuncCall := virtual !(LLVMWriteContext^ ctx,int resId,int debId,ExeDownList lst) -> void
	{
		lst[0].PrintPre(ctx)
		
		f := ctx.writeStream
		tFunc := GetType()->{TypeFunc^}
		tp := tFunc.Params[0].ItType

		f^ << "%T" << resId << " = xor " 
		tp.PrintType(ctx)
		f^ << " "
		lst[0].PrintUse(ctx)
		f^ << ", 1"
		if DebugMode
			f^ << " , !dbg !" << GDebugLineCallId
		f^ << "\n"
	}
}
BuildInBoolXor := class extend BoxFuncCommon
{
	this := !() -> void
	{
		SetType(GetFuncType(![GTypeBool,GTypeBool],GTypeBool))
	}
	PrintFuncCall := virtual !(LLVMWriteContext^ ctx,int resId,int debId,ExeDownList lst) -> void
	{
		lst[^].PrintPre(ctx)
		
		f := ctx.writeStream
		tFunc := GetType()->{TypeFunc^}
		tp := tFunc.Params[0].ItType

		f^ << "%T" << resId << " = xor " 
		tp.PrintType(ctx)
		f^ << " "
		lst[0].PrintUse(ctx)
		f^ << ", "
		lst[1].PrintUse(ctx)
		if DebugMode
			f^ << " , !dbg !" << GDebugLineCallId
		f^ << "\n"
	}
	IsMCInlined := virtual true
	WriteFuncCallMC := virtual !(MCBuildContext^ ctx,Vector.{BoxExeObj^} indexes) -> WriteMCResult
	{
		var1 := indexes[0].WriteMC(ctx).CreatedId
		var2 := indexes[1].WriteMC(ctx).CreatedId
		newVar := ctx.CreateVar(GTypeBool)
		HVB_ins_xor(ctx,newVar,var1,var2)
		result.CreatedId = newVar
	}
}
BuildInSpaceShipBool := class extend BoxFuncCommon
{
	this := !() -> void
	{
		tp := GTypeBool
		SetType(GetFuncType(![tp,tp],GTypeInt))
	}
	PrintFuncCall := virtual !(LLVMWriteContext^ ctx,int resId,int debId,ExeDownList lst) -> void
	{
		f := ctx.writeStream
		tp := this.GetType()->{TypeFunc^}.Params[0].ItType
		lst[0].PrintPre(ctx)
		lst[1].PrintPre(ctx)

		f^ << "%Xr" << resId << " = xor i1 " 
		lst[0].PrintUse(ctx)
		f^ << " , "
		lst[1].PrintUse(ctx)
		f^ << "\n"


		f^ << "%Possible" << resId << " = select i1 "
		lst[1].PrintUse(ctx)
		f^ << " , i32 1, i32 -1\n"

		f^ << "%T" << resId << " = select i1 %Xr" << resId << " , i32 0, i32 %Possible" << resId << "\n"

	}
}
