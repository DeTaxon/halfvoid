
GetCpuCount := !() -> int
{
	win32InitGetSystemInfo()
	printf("procs %i\n",win32SysInfo.dwNumberOfProcessors)
	return win32SysInfo.dwNumberOfProcessors
}



win32SysInfo := SYSTEM_INFO
win32InitGetSystemInfo := !() -> void
{
	first := static true
	
	if first
	{
		first = false
		GetSystemInfo(win32SysInfo&)
	}
}

