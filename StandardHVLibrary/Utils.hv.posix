
GetCpuCount := !() -> int
{
	cpuCount := static 0
	first := static true
	
	if first
	{
		first = false

		TempPoolBlock()

		data := TReadFile("/proc/cpuinfo")
		strs := DivideStr(data->{char^},"\n")

		cpuCount = 0
		for st : strs
		{	
			parts := st.DivideStr(": \t")
			if parts.Size() > 1 and parts[0] == "processor"
			{
				cpuCount += 1
			}
		}
	}
	return cpuCount
}

